<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order of Operations Practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.1em;
            background-color: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
        }
        .solution-box {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <main class="bg-white rounded-2xl shadow-lg w-full max-w-2xl">
        <div class="p-8 border-b border-gray-200">
            <h1 class="text-3xl font-bold text-gray-800">Order of Operations Practice</h1>
            <p class="text-gray-600 mt-2">Check your answer after each problem. Four-Function Calculator Allowed.</p>
        </div>

        <div id="quizContainer" class="p-8">
            <!-- The quiz question will be dynamically generated and inserted here -->
        </div>

    </main>

    <script>
        const quizContainer = document.getElementById('quizContainer');
        let currentQuestions = [];
        let currentQuestionIndex = 0;

        // --- UTILITY FUNCTIONS ---
        const getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        
        // --- QUESTION AND SOLUTION GENERATORS ---
        function generateOrderOfOperationsQuestions() {
            const questions = [];
            
            // a. Simple addition/subtraction
            const n1a = getRandomInt(10, 20); const n2a = getRandomInt(2, 9); const n3a = getRandomInt(2, 9);
            questions.push({
                text: `<code>${n1a} - ${n2a} + ${n3a}</code>`,
                answer: (n1a - n2a + n3a).toString(),
                solutionSteps: [
                    `<strong>Step 1 (Subtract):</strong> Following order of operations from left to right, start with subtraction.`,
                    `<code>${n1a} - ${n2a} = ${n1a - n2a}</code>`,
                    `<strong>Step 2 (Add):</strong> Now add the remaining term.`,
                    `<code>${n1a - n2a} + ${n3a} = ${n1a - n2a + n3a}</code>`,
                ]
            });

            // b. Simple multiplication/division
            const n1b = getRandomInt(2, 8); const n2b = getRandomInt(2, 5); const n3b = getRandomInt(2, 5);
            questions.push({
                text: `<code>${n1b * n2b} &divide; ${n2b} &middot; ${n3b}</code>`,
                answer: (n1b * n3b).toString(),
                solutionSteps: [
                    `<strong>Step 1 (Divide):</strong> Following order of operations from left to right, start with division.`,
                    `<code>${n1b * n2b} &divide; ${n2b} = ${n1b}</code>`,
                    `<strong>Step 2 (Multiply):</strong> Now multiply the remaining term.`,
                    `<code>${n1b} &middot; ${n3b} = ${n1b * n3b}</code>`,
                ]
            });

            // c. Mix of operations
            const n1c = getRandomInt(30, 50); const n2c_mult = getRandomInt(4, 8); const n2c_div = getRandomInt(2, 4); const n3c = getRandomInt(2, 5); const n4c = getRandomInt(10, 25);
            const p2 = n2c_mult * n2c_div;
            questions.push({
                text: `<code>${n1c} - ${p2} &divide; ${n2c_div} &middot; ${n3c} - ${n4c}</code>`,
                answer: (n1c - (n2c_mult * n3c) - n4c).toString(),
                 solutionSteps: [
                    `<strong>Step 1 (Divide):</strong> Multiplication and Division are done first, from left to right.`,
                    `<code>${p2} &divide; ${n2c_div} = ${n2c_mult}</code>`,
                    `<strong>Step 2 (Multiply):</strong> Continue with multiplication.`,
                    `<code>${n2c_mult} &middot; ${n3c} = ${n2c_mult * n3c}</code>`,
                    `<strong>Step 3 (Rewrite):</strong> The expression is now: <code>${n1c} - ${n2c_mult * n3c} - ${n4c}</code>`,
                    `<strong>Step 4 (Subtract):</strong> Finally, do Addition and Subtraction from left to right.`,
                    `<code>${n1c} - ${n2c_mult * n3c} = ${n1c - (n2c_mult*n3c)}</code>`,
                    `<code>${n1c - (n2c_mult*n3c)} - ${n4c} = ${n1c - (n2c_mult * n3c) - n4c}</code>`,
                ]
            });

            // d. Complex with parentheses and exponents
            const n1d = getRandomInt(20, 30); const n2d_mult = getRandomInt(2, 5); const n2d_div = getRandomInt(2, 4); const n3d = getRandomInt(2, 8); const n4d_c1 = getRandomInt(2, 5); const n4d_c2 = getRandomInt(6, 10); const n5d_base = getRandomInt(2, 4);
            const p1d = n2d_mult * n2d_div; const p_val = n4d_c1 - n4d_c2; const e_val = n5d_base**2;
            questions.push({
                text: `<code>${n1d} - ${p1d} &divide; ${n2d_div} + ${n3d} - ${n4d_c1}(${n4d_c1} - ${n4d_c2}) &middot; ${n5d_base}<sup>2</sup></code>`,
                answer: (n1d - n2d_mult + n3d - n4d_c1 * p_val * e_val).toString(),
                solutionSteps: [
                   `<strong>Step 1 (Parentheses):</strong> Start with the expression inside the parentheses.`,
                   `<code>(${n4d_c1} - ${n4d_c2}) = ${p_val}</code>`,
                   `<strong>Step 2 (Exponents):</strong> Evaluate any exponents.`,
                   `<code>${n5d_base}<sup>2</sup> = ${e_val}</code>`,
                   `<strong>Step 3 (Rewrite):</strong> The expression is now: <code>${n1d} - ${p1d} &divide; ${n2d_div} + ${n3d} - ${n4d_c1}(${p_val}) &middot; ${e_val}</code>`,
                   `<strong>Step 4 (Multiply/Divide):</strong> Work from left to right.`,
                   `<code>${p1d} &divide; ${n2d_div} = ${n2d_mult}</code>`,
                   `<code>${n4d_c1} &middot; ${p_val} = ${n4d_c1 * p_val}</code>`,
                   `<code>${n4d_c1 * p_val} &middot; ${e_val} = ${n4d_c1 * p_val * e_val}</code>`,
                   `<strong>Step 5 (Rewrite):</strong> The expression is now: <code>${n1d} - ${n2d_mult} + ${n3d} - ${n4d_c1 * p_val * e_val}</code>`,
                   `<strong>Step 6 (Add/Subtract):</strong> Work from left to right.`,
                   `<code>${n1d} - ${n2d_mult} = ${n1d - n2d_mult}</code>`,
                   `<code>${n1d - n2d_mult} + ${n3d} = ${n1d - n2d_mult + n3d}</code>`,
                   `<code>${n1d - n2d_mult + n3d} - ${n4d_c1 * p_val * e_val} = ${n1d - n2d_mult + n3d - (n4d_c1 * p_val * e_val)}</code>`
                ]
            });
            
            // e. Fraction bar
            let n1e, n2e, n3e, n4e, n5e, n6e, num_e, den_e;
            do { n1e = getRandomInt(3, 6); n2e = getRandomInt(1, 10); n3e = getRandomInt(2, 5); n4e = getRandomInt(2, 5); n5e = getRandomInt(2, 5); n6e = getRandomInt(1, 10); num_e = n1e**2 - n2e; den_e = n3e * (n4e + n5e) - n6e; } while (den_e === 0 || num_e % den_e !== 0);
            questions.push({
                text: `<div class="flex flex-col items-center text-lg"><span class="border-b-2 border-gray-800 px-4"><code>${n1e}<sup>2</sup> - ${n2e}</code></span><span><code>${n3e}(${n4e}+${n5e}) - ${n6e}</code></span></div>`,
                answer: (num_e / den_e).toString(),
                solutionSteps: [
                    `<strong>Step 1 (Numerator):</strong> The fraction bar acts as a grouping symbol. Evaluate the numerator first.`,
                    `<code>${n1e}<sup>2</sup> - ${n2e} = ${n1e**2} - ${n2e} = ${num_e}</code>`,
                    `<strong>Step 2 (Denominator):</strong> Now evaluate the denominator, starting with parentheses.`,
                    `<code>${n4e} + ${n5e} = ${n4e + n5e}</code>`,
                    `<code>${n3e}(${n4e + n5e}) - ${n6e} = ${n3e * (n4e + n5e)} - ${n6e} = ${den_e}</code>`,
                    `<strong>Step 3 (Divide):</strong> Finally, perform the division.`,
                    `<code>${num_e} &divide; ${den_e} = ${num_e / den_e}</code>`
                ]
            });
            
            // f. Absolute value
            const n1f = getRandomInt(1, 8); const n2f = getRandomInt(2, 4); const n3f = getRandomInt(2, 4); const n4f = getRandomInt(1, 8);
            questions.push({
                text: `<code>|${n1f} - ${n2f}<sup>2</sup>| - |${n3f}<sup>2</sup> - ${n4f}|</code>`,
                answer: (Math.abs(n1f - n2f**2) - Math.abs(n3f**2 - n4f)).toString(),
                solutionSteps: [
                    `<strong>Step 1 (First Absolute Value):</strong> Evaluate inside the first set of absolute value bars, starting with the exponent.`,
                    `<code>|${n1f} - ${n2f**2}| = |${n1f - n2f**2}| = ${Math.abs(n1f - n2f**2)}</code>`,
                     `<strong>Step 2 (Second Absolute Value):</strong> Evaluate inside the second set of absolute value bars.`,
                    `<code>|${n3f**2} - ${n4f}| = |${n3f**2 - n4f}| = ${Math.abs(n3f**2 - n4f)}</code>`,
                    `<strong>Step 3 (Subtract):</strong> Subtract the results.`,
                    `<code>${Math.abs(n1f - n2f**2)} - ${Math.abs(n3f**2 - n4f)} = ${(Math.abs(n1f - n2f**2) - Math.abs(n3f**2 - n4f))}</code>`
                ]
            });

            return questions;
        }

        // --- CORE QUIZ LOGIC ---
        function startQuiz() {
            currentQuestionIndex = 0;
            currentQuestions = generateOrderOfOperationsQuestions();
            renderCurrentQuestion();
        }

        function renderCurrentQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                quizContainer.innerHTML = `<div class="text-center">
                    <h2 class="text-2xl font-bold text-gray-800">Quiz Complete!</h2>
                    <p class="mt-2 text-gray-600">You've finished all the questions.</p>
                    <button id="startOverBtn" class="mt-6 bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Start Over with New Questions</button>
                </div>`;
                document.getElementById('startOverBtn').addEventListener('click', startQuiz);
                return;
            }

            const q = currentQuestions[currentQuestionIndex];
            quizContainer.innerHTML = `
                <div class="mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">Question ${currentQuestionIndex + 1} of ${currentQuestions.length}</h2>
                    <p class="mt-1 text-gray-600">Evaluate the expression:</p>
                </div>
                <div class="text-center text-2xl my-8">${q.text}</div>
                <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                    <input type="text" id="userAnswer" class="p-3 border border-gray-300 rounded-lg text-center text-lg w-full sm:w-auto">
                    <button id="checkBtn" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 w-full sm:w-auto">Check Answer</button>
                </div>
                <div id="feedbackContainer" class="mt-6"></div>
            `;

            document.getElementById('checkBtn').addEventListener('click', checkAnswer);
            document.getElementById('userAnswer').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('userAnswer').value.trim();
            const feedbackContainer = document.getElementById('feedbackContainer');
            const q = currentQuestions[currentQuestionIndex];
            const isCorrect = userAnswer === q.answer;

            let feedbackHTML = `<div class="p-4 rounded-lg solution-box">`;
            if (isCorrect) {
                feedbackHTML += `<h3 class="text-lg font-bold text-green-700">Correct!</h3>`;
            } else {
                feedbackHTML += `<h3 class="text-lg font-bold text-red-700">Not quite.</h3>
                                 <p class="mt-1">Your answer was <strong>${userAnswer || "empty"}</strong>. The correct answer is <strong>${q.answer}</strong>.</p>`;
            }
            
            feedbackHTML += `<div class="mt-4"><h4 class="font-semibold">Here's how to solve it:</h4><div class="mt-2 space-y-2 text-sm text-gray-700">${q.solutionSteps.join('')}</div></div>`;
            feedbackHTML += `</div><div class="text-center mt-6">
                                <button id="nextBtn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Next Question</button>
                             </div>`;
            
            feedbackContainer.innerHTML = feedbackHTML;
            document.getElementById('checkBtn').disabled = true;
            document.getElementById('userAnswer').disabled = true;
            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('nextBtn').focus();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            renderCurrentQuestion();
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', startQuiz);
    </script>
</body>
</html>

