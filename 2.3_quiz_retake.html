<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algebra I: Equation Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .solution-step {
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.5s ease forwards;
        }
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .btn {
            transition: all 0.2s ease;
        }
        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
        }
        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .type-btn.selected {
            background-color: #2563eb; /* blue-600 */
            color: white;
            border-color: #2563eb;
        }
        .latex {
            font-family: "Times New Roman", Times, serif;
        }
        #quiz-area.hidden, #start-area.hidden, #end-area.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased flex items-center justify-center min-h-screen">
    <div class="container mx-auto p-4 md:p-8 max-w-2xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900">Algebra I Quiz</h1>
            <p class="text-lg text-gray-600 mt-2">One Question at a Time</p>
        </header>

        <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            
            <!-- Start Screen -->
            <div id="start-area" class="text-center">
                <h2 class="text-2xl font-bold mb-4">Ready to practice solving equations?</h2>
                <p class="text-gray-600 mb-6">You'll get 9 questions covering different equation types. Work them out, check your answer, then review the step-by-step solution.</p>
                <button id="start-btn" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 btn">
                    üöÄ Start Quiz
                </button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-area" class="hidden">
                <p id="progress" class="text-right text-gray-500 font-semibold mb-4"></p>
                <div class="bg-gray-50 rounded-lg p-6 mb-4 min-h-[80px] flex items-center justify-center">
                    <p id="question" class="text-2xl font-medium text-center"></p>
                </div>
                
                <!-- Answer Input Area -->
                <div id="answer-area" class="mb-4">
                    <div id="solve-input-container">
                        <label for="answer-input" class="block text-sm font-medium text-gray-700 mb-1">Enter your answer:</label>
                        <input type="text" id="answer-input" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="e.g., 5 or -10">
                    </div>
                    <div id="type-input-container" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">What is the number of solutions?</label>
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
                             <button class="type-btn border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-100 btn" data-answer="One solution">One solution</button>
                             <button class="type-btn border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-100 btn" data-answer="No solution">No solution</button>
                             <button class="type-btn border border-gray-300 py-2 px-4 rounded-md hover:bg-gray-100 btn" data-answer="Infinitely many solutions">Infinitely many solutions</button>
                        </div>
                    </div>
                </div>

                <div id="feedback-container" class="mb-4 h-6 text-center font-semibold"></div>

                <div id="solution-container" class="space-y-3 mb-6"></div>

                <div class="flex flex-col sm:flex-row gap-4">
                    <button id="check-btn" class="w-full sm:w-auto flex-1 bg-green-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 btn">
                        ‚úÖ Check Answer
                    </button>
                    <button id="next-btn" class="w-full sm:w-auto flex-1 bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 btn hidden">
                        ‚û°Ô∏è Next Question
                    </button>
                </div>
            </div>

            <!-- End Screen -->
            <div id="end-area" class="hidden text-center">
                 <h2 class="text-2xl font-bold mb-4">üéâ Quiz Complete! üéâ</h2>
                <p class="text-gray-600 mb-6">Great job working through those problems. Practice is key to mastering algebra!</p>
                <button id="restart-btn" class="w-full bg-blue-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 btn">
                    üîÑ Practice Again
                </button>
            </div>
        </div>

        <footer class="text-center mt-8 text-gray-500">
            <p>A collaborative creation to help students master algebra.</p>
        </footer>
    </div>

    <script>
        // --- DOM Elements ---
        const startArea = document.getElementById('start-area');
        const quizArea = document.getElementById('quiz-area');
        const endArea = document.getElementById('end-area');
        
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const checkBtn = document.getElementById('check-btn');
        const nextBtn = document.getElementById('next-btn');
        
        const progressText = document.getElementById('progress');
        const questionText = document.getElementById('question');
        const solutionContainer = document.getElementById('solution-container');
        const feedbackContainer = document.getElementById('feedback-container');

        const solveInputContainer = document.getElementById('solve-input-container');
        const typeInputContainer = document.getElementById('type-input-container');
        const answerInput = document.getElementById('answer-input');
        const typeBtns = document.querySelectorAll('.type-btn');

        // --- State ---
        let questions = [];
        let currentQuestionIndex = 0;
        let selectedTypeAnswer = '';

        // --- Helper Functions ---
        const randint = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);

        // --- Question Generation (unchanged) ---
        function generateSolveQuestions() {
            const generated = [];
            let solution;

            // Type 1: twoStep (e.g., 38 = -5x - 12)
            solution = randint(-10, 10) || 1;
            const a1 = randint(2, 9), b1 = randint(-15, 15);
            const lhs1 = a1 * solution + b1;
            generated.push({
                type: 'solve',
                question: `${lhs1} = ${a1}x ${b1 >= 0 ? '+' : '-'} ${Math.abs(b1)}`,
                answer: `x = ${solution}`,
                steps: [
                    `Start with the equation: <strong>${lhs1} = ${a1}x ${b1 >= 0 ? '+' : '-'} ${Math.abs(b1)}</strong>`,
                    `To isolate the x term, ${b1 >= 0 ? 'subtract' : 'add'} ${Math.abs(b1)} from both sides.`,
                    `<em>${lhs1} ${b1 >= 0 ? '-' : '+'} ${Math.abs(b1)} = ${a1}x</em>  &nbsp;‚û°Ô∏è&nbsp; <strong>${lhs1 - b1} = ${a1}x</strong>`,
                    `Divide both sides by ${a1} to solve for x.`,
                    `<em>x = ${lhs1-b1} / ${a1}</em> &nbsp;‚û°Ô∏è&nbsp; <strong class="text-green-600">x = ${solution}</strong>`
                ]
            });
            
            // Type 2: distributive (e.g., 3(4k + 4) = 60)
            solution = randint(-5, 5) || 1;
            const a2 = randint(2, 5), b2 = randint(2, 5), c2 = randint(-5, 5);
            const rhs2 = a2 * (b2 * solution + c2);
            generated.push({
                type: 'solve',
                question: `${a2}(${b2}k + ${c2}) = ${rhs2}`,
                answer: `k = ${solution}`,
                steps: [
                    `Start with the equation: <strong>${a2}(${b2}k + ${c2}) = ${rhs2}</strong>`,
                    `Distribute the ${a2} to both terms inside the parentheses.`,
                    `<em>(${a2} * ${b2}k) + (${a2} * ${c2}) = ${rhs2}</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${a2*b2}k + ${a2*c2} = ${rhs2}</strong>`,
                    `Now it's a two-step equation. ${a2*c2 > 0 ? 'Subtract' : 'Add'} ${Math.abs(a2*c2)} from both sides.`,
                    `<em>${a2*b2}k = ${rhs2} ${a2*c2 > 0 ? '-' : '+'} ${Math.abs(a2*c2)}</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${a2*b2}k = ${rhs2 - (a2*c2)}</strong>`,
                    `Divide both sides by ${a2*b2}.`,
                    `<em>k = ${rhs2 - (a2*c2)} / ${a2*b2}</em> &nbsp;‚û°Ô∏è&nbsp; <strong class="text-green-600">k = ${solution}</strong>`
                ]
            });
            
            // Type 3: simpleFraction (e.g., (1/3)(6x - 9) = 5)
            solution = randint(-8, 8) || 1;
            const den3 = randint(2, 5);
            const coeff3 = den3 * randint(1, 3);
            const const3 = den3 * randint(-5, 5);
            const rhs3 = (coeff3 * solution + const3) / den3;
             generated.push({
                type: 'solve',
                question: `<span class="latex"><sup>1</sup>&frasl;<sub>${den3}</sub></span>(${coeff3}x ${const3 >= 0 ? '+':'-'} ${Math.abs(const3)}) = ${rhs3}`,
                answer: `x = ${solution}`,
                steps: [
                    `Start with the equation: <strong><span class="latex"><sup>1</sup>&frasl;<sub>${den3}</sub></span>(${coeff3}x ${const3 >= 0 ? '+':'-'} ${Math.abs(const3)}) = ${rhs3}</strong>`,
                    `To clear the fraction, multiply both sides by the denominator, ${den3}.`,
                    `<em>${den3} * <span class="latex"><sup>1</sup>&frasl;<sub>${den3}</sub></span>(...) = ${rhs3} * ${den3}</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${coeff3}x ${const3 >= 0 ? '+':'-'} ${Math.abs(const3)} = ${rhs3 * den3}</strong>`,
                    `Now, ${const3 >= 0 ? 'subtract' : 'add'} ${Math.abs(const3)} from both sides.`,
                    `<em>${coeff3}x = ${rhs3*den3} ${const3 >= 0 ? '-' : '+'} ${Math.abs(const3)}</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${coeff3}x = ${(rhs3*den3) - const3}</strong>`,
                    `Divide both sides by ${coeff3}.`,
                    `<em>x = ${(rhs3*den3) - const3} / ${coeff3}</em> &nbsp;‚û°Ô∏è&nbsp; <strong class="text-green-600">x = ${solution}</strong>`
                ]
            });

            return generated;
        }

        function generateTypeQuestions() {
            const generated = [];
            let a, b, c, lhsSimple, rhsSimple;

            // Type 1: One solution
            a = randint(4, 9); b = randint(1, 10);
            c = randint(2, a - 1); // Ensure x-coeffs are different
            lhsSimple = `${a}x + ${b}`;
            rhsSimple = `${c}x + ${randint(-10, 10)}`;
            generated.push({
                type: 'type',
                question: `2x + ${b-5} + ${a-2}x + 5 = ${c}x + ${randint(-10, 10)}`,
                answer: `One solution`,
                steps: [
                    `Original equation: <strong>2x + ${b-5} + ${a-2}x + 5 = ${c}x + ${randint(-10, 10)}</strong>`,
                    `Combine like terms on the left side: <em>(2x + ${a-2}x) + (${b-5} + 5)</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${lhsSimple}</strong>`,
                    `The simplified equation is: <strong>${lhsSimple} = ${rhsSimple}</strong>`,
                    `Because the coefficients of x (${a} and ${c}) are different, there will be exactly <strong class="text-green-600">one solution</strong>.`
                ]
            });
            
            // Type 2: No solution
            a = randint(4, 9); b = randint(1, 10); c = b + randint(1, 5); // Ensure constants are different
            lhsSimple = `${a}x + ${b}`;
            rhsSimple = `${a}x + ${c}`;
            generated.push({
                type: 'type',
                question: `${a}x + ${b} = ${a-2}x + ${c+5} + 2x - 5`,
                answer: `No solution`,
                steps: [
                    `Original equation: <strong>${a}x + ${b} = ${a-2}x + ${c+5} + 2x - 5</strong>`,
                    `Combine like terms on the right side: <em>(${a-2}x + 2x) + (${c+5} - 5)</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${rhsSimple}</strong>`,
                    `The simplified equation is: <strong>${lhsSimple} = ${rhsSimple}</strong>`,
                    `The coefficients of x are the same (${a}), but the constants (${b} and ${c}) are different.`,
                    `If we subtract ${a}x from both sides, we get ${b} = ${c}, which is false. Therefore, there is <strong class="text-green-600">no solution</strong>.`
                ]
            });
            
            // Type 3: Infinite solutions
            a = randint(4, 9); b = randint(1, 10);
            lhsSimple = `${a}x + ${b}`;
            rhsSimple = `${a}x + ${b}`;
            generated.push({
                type: 'type',
                question: `${a}x - 5 + ${b+5} = 2(${a/2}x) + ${b}`,
                answer: `Infinitely many solutions`,
                steps: [
                    `Original equation: <strong>${a}x - 5 + ${b+5} = 2(${a/2}x) + ${b}</strong>`,
                    `Combine like terms on the left side: <em>${a}x + (-5 + ${b+5})</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${lhsSimple}</strong>`,
                    `Simplify the right side: <em>2 * ${a/2}x + ${b}</em> &nbsp;‚û°Ô∏è&nbsp; <strong>${rhsSimple}</strong>`,
                    `The simplified equation is: <strong>${lhsSimple} = ${rhsSimple}</strong>`,
                    `Because both sides are identical, this equation is true for any value of x. Therefore, there are <strong class="text-green-600">infinitely many solutions</strong>.`
                ]
            });

            return generated;
        }
        
        // --- Quiz Logic ---
        function startQuiz() {
            const solveQs = generateSolveQuestions();
            const typeQs = generateTypeQuestions();
            const allQs = [...solveQs, ...solveQs, ...typeQs];
            questions = shuffle(allQs).slice(0, 9);
            currentQuestionIndex = 0;
            
            startArea.classList.add('hidden');
            endArea.classList.add('hidden');
            quizArea.classList.remove('hidden');

            displayQuestion();
        }

        function displayQuestion() {
            solutionContainer.innerHTML = '';
            feedbackContainer.innerHTML = '';
            answerInput.value = '';
            selectedTypeAnswer = '';

            const q = questions[currentQuestionIndex];
            progressText.textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            questionText.innerHTML = q.question;
            
            if(q.type === 'solve') {
                solveInputContainer.classList.remove('hidden');
                typeInputContainer.classList.add('hidden');
                answerInput.disabled = false;
            } else { // type
                solveInputContainer.classList.add('hidden');
                typeInputContainer.classList.remove('hidden');
                typeBtns.forEach(btn => {
                    btn.classList.remove('selected');
                    btn.disabled = false;
                });
            }

            checkBtn.classList.remove('hidden');
            nextBtn.classList.add('hidden');
        }

        function checkAnswer() {
            const q = questions[currentQuestionIndex];
            let userAnswer;
            let isCorrect = false;

            if (q.type === 'solve') {
                userAnswer = answerInput.value.trim();
                const correctAnswer = q.answer.split('=')[1].trim();
                if (userAnswer === correctAnswer) {
                    isCorrect = true;
                }
            } else { // type
                userAnswer = selectedTypeAnswer;
                if(userAnswer === q.answer) {
                    isCorrect = true;
                }
            }

            if(isCorrect) {
                feedbackContainer.textContent = 'Correct! üéâ';
                feedbackContainer.className = 'mb-4 h-6 text-center font-semibold text-green-600';
            } else {
                feedbackContainer.textContent = 'Not quite. Here is the solution:';
                feedbackContainer.className = 'mb-4 h-6 text-center font-semibold text-red-600';
            }

            // Lock inputs
            answerInput.disabled = true;
            typeBtns.forEach(btn => btn.disabled = true);
            
            showSolution();
        }

        function showSolution() {
            const q = questions[currentQuestionIndex];
            let delay = 0;
            solutionContainer.innerHTML = q.steps.map(step => {
                delay += 200; // Stagger animation
                return `<p class="p-3 bg-gray-100 rounded-md solution-step" style="animation-delay: ${delay}ms">${step}</p>`;
            }).join('');

            checkBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'üèÅ Finish Quiz';
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
                nextBtn.textContent = '‚û°Ô∏è Next Question';
                displayQuestion();
            } else {
                showEndScreen();
            }
        }

        function showEndScreen() {
            quizArea.classList.add('hidden');
            endArea.classList.remove('hidden');
        }

        // --- Event Listeners ---
        startBtn.addEventListener('click', startQuiz);
        restartBtn.addEventListener('click', startQuiz);
        checkBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', nextQuestion);

        typeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if(btn.disabled) return;
                typeBtns.forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedTypeAnswer = btn.dataset.answer;
            });
        });
    </script>
</body>
</html>

