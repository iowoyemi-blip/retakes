<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linear Functions Practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .quiz-container {
            transition: all 0.3s ease-in-out;
        }
        .result-item.correct {
            background-color: #f0fdf4;
            border-left-color: #22c55e;
        }
        .result-item.incorrect {
            background-color: #fef2f2;
            border-left-color: #ef4444;
        }
        .data-table {
            border-collapse: collapse;
            width: 100%;
            min-width: 160px;
        }
        .data-table th, .data-table td {
            border: 1px solid #d1d5db;
            padding: 0.5rem;
            text-align: center;
        }
        .data-table th {
            background-color: #f3f4f6;
        }
        canvas {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db;
            transition: all 0.2s;
        }
        .checkbox-label:has(input:checked) {
            background-color: #eff6ff;
            border-color: #3b82f6;
        }
        /* Style for feedback within a question */
        .feedback-correct { color: #166534; }
        .feedback-incorrect { color: #b91c1c; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

    <main class="bg-white rounded-2xl shadow-lg w-full max-w-5xl quiz-container">
        <div class="p-8 border-b border-gray-200">
            <h1 class="text-3xl font-bold text-gray-800">3.3 Quiz Linear Functions Retake (Must Take Two Sets in a Row)</h1>
            <p class="text-gray-600 mt-2">Generate a new quiz anytime.</p>
        </div>

        <div id="quizContainer" class="p-8">
            </div>

        <div id="resultsSection" class="hidden p-8">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Quiz Results</h2>
            <div id="score" class="text-xl mb-6 font-semibold"></div>
            <div id="detailedResults" class="space-y-4"></div>
             <div class="mt-8 text-center flex flex-col sm:flex-row justify-center items-center gap-4">
                <button id="retakeQuizBtn" class="bg-gray-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-gray-700">Try This Quiz Again</button>
                <button id="generateNewBtn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">Generate New Quiz</button>
            </div>
        </div>
    </main>

    <script>
        // --- DOM Elements ---
        const quizContainer = document.getElementById('quizContainer');
        const resultsSection = document.getElementById('resultsSection');
        const scoreElement = document.getElementById('score');
        const detailedResultsElement = document.getElementById('detailedResults');
        const retakeQuizBtn = document.getElementById('retakeQuizBtn');
        const generateNewBtn = document.getElementById('generateNewBtn');

        // --- Quiz State ---
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userResults = []; // Stores {title, isCorrect, feedbackHTML}

        // --- Utility Functions ---
        const getRandomInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);
        const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);

        // --- Core Quiz Logic ---
        document.addEventListener('DOMContentLoaded', () => {
             generateQuizData();
             startQuiz();
        });
        generateNewBtn.addEventListener('click', () => {
            generateQuizData();
            startQuiz();
        });
        retakeQuizBtn.addEventListener('click', () => {
            startQuiz(); // Retakes the *same* set of questions
        });
        
        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userResults = [];
            resultsSection.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            renderCurrentQuestion();
        }

        function generateQuizData() {
            let questions = [];
            
            // Q1: Identify Linear Tables
            const tables = [];
            const m1 = getRandomInt(2, 5); const b1 = getRandomInt(1, 10);
            tables.push({ data: Array.from({length: 4}, (_, i) => ({x: i+1, y: m1*(i+1)+b1})), isLinear: true, id: 'q1_t1' });
            const m2 = getRandomInt(-5, -2); const b2 = getRandomInt(10, 20);
            tables.push({ data: Array.from({length: 4}, (_, i) => ({x: i+1, y: m2*(i+1)+b2})), isLinear: true, id: 'q1_t2' });
            tables.push({ data: Array.from({length: 4}, (_, i) => ({x: i+1, y: (i+1)**2 + 1})), isLinear: false, id: 'q1_t3' });
            tables.push({ data: Array.from({length: 4}, (_, i) => ({x: i+1, y: 2**(i+1)})), isLinear: false, id: 'q1_t4' });
            questions.push({ type: 'select-tables', id: 'q1', title: 'Which table of values represent a linear function? Circle ALL that apply.', tables: shuffle(tables) });

            // Q2: Determine Slope
            const slopeQuestions = [];
            const x1 = getRandomInt(-5, 0); const y1 = getRandomInt(-5, 5);
            const dx = getRandomInt(2, 6); const dy = getRandomInt(-10, 10);
            const x2 = x1 + dx; const y2 = y1 + dy;
            const commonDivisor = gcd(dy, dx);
            const simplifiedDy = dy / commonDivisor; const simplifiedDx = dx / commonDivisor;
            let slopeAns2a = simplifiedDx === 1 ? `${simplifiedDy}` : `${simplifiedDy}/${simplifiedDx}`;
            if (simplifiedDx < 0) { slopeAns2a = `${-simplifiedDy}/${-simplifiedDx}`; }
            slopeQuestions.push({ type: 'points', id: 'q2a', text: `Passing through the points: (${x1}, ${y1}) and (${x2}, ${y2})`, answer: slopeAns2a });
            const m2b = getRandomInt(-2, 2) || 1; const b2b = getRandomInt(-3, 3);
            slopeQuestions.push({ type: 'graph', id: 'q2b', text: 'The graph:', data: { m: m2b, b: b2b }, answer: m2b.toString() });
            const m2c = getRandomInt(-5, 5) || 1; const b2c = getRandomInt(0, 10);
            const table2c = Array.from({length: 5}, (_, i) => ({x: i+1, y: m2c*(i+1)+b2c}));
            slopeQuestions.push({ type: 'table', id: 'q2c', text: 'The table of values:', data: table2c, answer: m2c.toString() });
            questions.push({ type: 'slope', id: 'q2', title: 'Determine the slope of the line represented in each case. Simplify your answers.', subQuestions: slopeQuestions });

            // Q3: Find Equation
            const eqQuestions = [];
            const m3a = getRandomInt(2, 10); const b3a = getRandomInt(5, 15);
            eqQuestions.push({id: 'q3a', data: Array.from({length: 4}, (_, i) => ({x: i, y: m3a*i+b3a})), answer: `y=${m3a}x+${b3a}`});
            const m3b = getRandomInt(-5, 5) || 1; const b3b = getRandomInt(-5, 5);
            eqQuestions.push({id: 'q3b', data: Array.from({length: 4}, (_, i) => ({x: i+1, y: m3b*(i+1)+b3b})), answer: `y=${m3b}x${b3b >= 0 ? '+' : ''}${b3b}`});
            questions.push({ type: 'equation', id: 'q3', title: 'Find the equation of each linear function represented by the tables below in slope-intercept form.', subQuestions: eqQuestions });
            
            // Q4: Word Problem
            const rate4 = getRandomInt(40, 70);
            const inputVal = getRandomInt(2, 5);
            questions.push({ type: 'word-problem', id: 'q4',
                text: `Julia is driving along a highway at a speed of ${rate4} miles per hour. Answer the following questions regarding the relationship between distance and time.`,
                answers: {
                    independent: 'time', dependent: 'distance',
                    func: `J(x)=${rate4}x`,
                    eval: (rate4 * inputVal).toString(),
                    meaning: `the distance traveled in ${inputVal} hours`
                },
                inputVal
            });

            // Q5: Text-based WP
            const fee5 = getRandomInt(25, 75);
            const rate5 = getRandomInt(40, 80);
            questions.push({
                type: 'equation-wp',
                id: 'q5',
                title: `A plumber charges a $${fee5} service fee plus $${rate5} per hour of work. Write an equation for the total cost y for x hours of work.`,
                answer: `y=${rate5}x+${fee5}`
            });

            // Q6: Graph-based WP
            const initialSavings6 = getRandomInt(2, 5) * 10;
            const weeklySavings6 = getRandomInt(4, 7);
            questions.push({
                type: 'equation-wp',
                id: 'q6',
                title: `Sarah is saving money. The graph shows her total savings y after x weeks. Write an equation for her savings.`,
                graphData: { m: weeklySavings6, b: initialSavings6 },
                answer: `y=${weeklySavings6}x+${initialSavings6}`
            });

            currentQuestions = questions;
        }

        function renderCurrentQuestion() {
            const q = currentQuestions[currentQuestionIndex];
            let html = `<form id="questionForm">`; // Use form for accessibility (e.g., pressing Enter)
            
            html += `<h2 class="text-xl font-semibold text-gray-700 mb-6">${q.id.toUpperCase()}. ${q.title}</h2>`;
            
            if(q.type === 'select-tables') {
                html += `<div class="grid grid-cols-1 md:grid-cols-2 gap-6">`;
                q.tables.forEach(t => {
                    html += `<label class="checkbox-label"><input type="checkbox" id="${t.id}" class="mr-4 h-5 w-5">
                            <table class="data-table"><thead><tr><th>x</th><th>y</th></tr></thead><tbody>
                            ${t.data.map(p => `<tr><td>${p.x}</td><td>${p.y}</td></tr>`).join('')}</tbody></table></label>`;
                });
                html += `</div>`;
            } else if(q.type === 'slope') {
                html += `<div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">`;
                q.subQuestions.forEach((sq, i) => {
                    html += `<div class="flex flex-col items-center">
                            <p class="mb-2 text-center">${String.fromCharCode(97+i)}) ${sq.text}</p>`;
                    if(sq.type === 'graph') html += `<canvas id="${sq.id}_canvas"></canvas>`;
                    if(sq.type === 'table') html += `<table class="data-table"><thead><tr><th>x</th><th>y</th></tr></thead><tbody>
                            ${sq.data.map(p => `<tr><td>${p.x}</td><td>${p.y}</td></tr>`).join('')}</tbody></table>`;
                    html += `<input type="text" id="${sq.id}" class="w-full max-w-xs mt-2 p-2 border rounded-lg" placeholder="Slope" required></div>`;
                });
                html += `</div>`;
            } else if (q.type === 'equation') {
                 html += `<div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">`;
                 q.subQuestions.forEach((sq, i) => {
                     html += `<div class="flex flex-col items-center"><p class="mb-2">${String.fromCharCode(97+i)})</p>
                              <table class="data-table"><thead><tr><th>x</th><th>y</th></tr></thead><tbody>
                              ${sq.data.map(p => `<tr><td>${p.x}</td><td>${p.y}</td></tr>`).join('')}</tbody></table>
                              <input type="text" id="${sq.id}" class="w-full max-w-xs mt-2 p-2 border rounded-lg" placeholder="Equation: y=mx+b" required></div>`;
                 });
                 html += `</div>`;
            } else if(q.type === 'word-problem') {
                html += `<p class="mb-4">${q.text}</p><div class="space-y-3 max-w-lg mx-auto">
                    <div><label>The independent variable is </label><input id="wp_ind" class="p-1 border rounded" required></div>
                    <div><label>The dependent variable is </label><input id="wp_dep" class="p-1 border rounded" required></div>
                    <div><label>Write a function relating these variables: </label><input id="wp_func" class="p-1 border rounded" required></div>
                    <div><label>So, J(${q.inputVal}) = </label><input id="wp_eval" class="w-20 p-1 border rounded" required>
                    <label>, meaning </label><input id="wp_meaning" class="p-1 border rounded" required></div>
                </div>`;
            } else if (q.type === 'equation-wp') {
                if (q.graphData) {
                    html += `<div class="flex justify-center mb-4"><canvas id="${q.id}_canvas" width="280" height="280"></canvas></div>`;
                }
                html += `<div class="flex justify-center">
                            <input type="text" id="${q.id}" class="w-full max-w-sm p-2 border rounded-lg" placeholder="Equation: y=mx+b" required>
                         </div>`;
            }
            
            // Add containers for feedback and navigation
            html += `<div id="feedbackContainer" class="mt-6"></div>`;
            html += `<div id="navigationContainer" class="mt-6 text-center">
                        <button type="submit" id="submitAnswerBtn" class="bg-green-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-green-700">Submit Answer</button>
                     </div>`;
            html += `</form>`;
            
            quizContainer.innerHTML = html;

            // Add form submit listener
            document.getElementById('questionForm').addEventListener('submit', (e) => {
                e.preventDefault(); // Stop form from reloading page
                checkAnswer();
            });

            // Trigger graph drawing (must be after innerHTML)
            requestAnimationFrame(() => {
                if(q.type === 'slope') {
                    const slopeGraph = q.subQuestions.find(sq => sq.type === 'graph');
                    if(slopeGraph) drawGraph(`${slopeGraph.id}_canvas`, slopeGraph.data);
                }
                if(q.type === 'equation-wp' && q.graphData) {
                    drawQuadrantOneGraph(`${q.id}_canvas`, q.graphData);
                }
            });
        }
        
        function checkAnswer() {
            const q = currentQuestions[currentQuestionIndex];
            const feedbackContainer = document.getElementById('feedbackContainer');
            const navigationContainer = document.getElementById('navigationContainer');
            
            let isCorrect = false;
            let feedbackHTML = '';

            if (q.type === 'select-tables') {
                const userChecked = q.tables.filter(t => document.getElementById(t.id).checked).map(t => t.id).sort();
                const correctChecked = q.tables.filter(t => t.isLinear).map(t => t.id).sort();
                isCorrect = JSON.stringify(userChecked) === JSON.stringify(correctChecked);
                
                if(isCorrect) {
                    feedbackHTML = `<div class="result-item correct border-l-4 p-4"><p class="font-semibold">Correct!</p>
                                    <p class="text-sm">Linear functions have a constant rate of change (slope).</p></div>`;
                } else {
                    const correctTables = q.tables.filter(t => t.isLinear).length;
                    feedbackHTML = `<div class="result-item incorrect border-l-4 p-4"><p class="font-semibold">Not quite.</p>
                                    <p class="text-sm">You selected ${userChecked.length} table(s), but ${correctTables} are linear. Remember to check if the rate of change (Δy/Δx) is constant for each table.</p></div>`;
                }
            } 
            
            else if (q.type === 'slope') {
                let allCorrect = true;
                feedbackHTML = `<div class="result-item border-l-4 p-4 space-y-2">`;
                q.subQuestions.forEach(sq => {
                    const userInput = document.getElementById(sq.id).value.replace(/\s+/g, '').toLowerCase();
                    const subCorrect = userInput === sq.answer.replace(/\s+/g, '').toLowerCase();
                    if (!subCorrect) allCorrect = false;
                    feedbackHTML += `<p class="text-sm ${subCorrect ? 'feedback-correct' : 'feedback-incorrect'}">
                                        <strong>Part ${sq.id}:</strong> Your answer: <strong>${userInput || 'none'}</strong>.
                                        ${!subCorrect ? ` Correct answer: <strong>${sq.answer}</strong>` : ''}
                                     </p>`;
                });
                isCorrect = allCorrect;
                feedbackHTML += `</div>`;
                feedbackContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
            }

            else if (q.type === 'equation') {
                let allCorrect = true;
                feedbackHTML = `<div class="result-item border-l-4 p-4 space-y-2">`;
                q.subQuestions.forEach(sq => {
                    const userInput = document.getElementById(sq.id).value.replace(/\s+/g, '').toLowerCase();
                    const ans = sq.answer.replace(/\s+/g, '').toLowerCase();
                    const parts = ans.substring(2).split(/(?=[+-])/);
                    let altAns = '';
                    if (parts.length === 2 && !parts[0].includes('x')) altAns = `y=${parts[1]}${parts[0]}`;
                    else if (parts.length === 2 && !parts[1].includes('x')) altAns = `y=${parts[1]}${parts[0]}`;
                    
                    const subCorrect = (userInput === ans) || (altAns && userInput === altAns);
                    if (!subCorrect) allCorrect = false;
                     feedbackHTML += `<p class="text-sm ${subCorrect ? 'feedback-correct' : 'feedback-incorrect'}">
                                        <strong>Part ${sq.id}:</strong> Your answer: <strong>${userInput || 'none'}</strong>.
                                        ${!subCorrect ? ` Correct answer: <strong>${sq.answer}</strong>` : ''}
                                     </p>`;
                });
                isCorrect = allCorrect;
                feedbackHTML += `</div>`;
                feedbackContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
            }

            else if (q.type === 'word-problem') {
                const results = {
                    ind: document.getElementById('wp_ind').value.trim().toLowerCase(),
                    dep: document.getElementById('wp_dep').value.trim().toLowerCase(),
                    func: document.getElementById('wp_func').value.replace(/\s+/g, '').toLowerCase(),
                    eval: document.getElementById('wp_eval').value.trim(),
                };
                const correct = q.answers;
                const indCorrect = results.ind.includes(correct.independent);
                const depCorrect = results.dep.includes(correct.dependent);
                const funcCorrect = results.func === correct.func.toLowerCase();
                const evalCorrect = results.eval === correct.eval;
                isCorrect = indCorrect && depCorrect && funcCorrect && evalCorrect;

                feedbackHTML = `<div class="result-item border-l-4 p-4 space-y-1 ${isCorrect ? 'correct' : 'incorrect'}">
                    <p class="${indCorrect ? 'feedback-correct' : 'feedback-incorrect'}">Independent: <strong>${results.ind}</strong> ${!indCorrect ? `(Correct: <strong>${correct.independent}</strong>)`:''}</p>
                    <p class="${depCorrect ? 'feedback-correct' : 'feedback-incorrect'}">Dependent: <strong>${results.dep}</strong> ${!depCorrect ? `(Correct: <strong>${correct.dependent}</strong>)`:''}</p>
                    <p class="${funcCorrect ? 'feedback-correct' : 'feedback-incorrect'}">Function: <strong>${results.func}</strong> ${!funcCorrect ? `(Correct: <strong>${correct.func}</strong>)`:''}</p>
                    <p class="${evalCorrect ? 'feedback-correct' : 'feedback-incorrect'}">Evaluation: <strong>${results.eval}</strong> ${!evalCorrect ? `(Correct: <strong>${correct.eval}</strong>)`:''}</p>
                </div>`;
            }

            else if (q.type === 'equation-wp') {
                const userInput = document.getElementById(q.id).value.replace(/\s+/g, '').toLowerCase();
                const ans = q.answer.replace(/\s+/g, '').toLowerCase();
                const parts = ans.substring(2).split(/(?=[+-])/);
                let altAns = '';
                if (parts.length === 2 && !parts[0].includes('x')) altAns = `y=${parts[1]}${parts[0]}`;
                else if (parts.length === 2 && !parts[1].includes('x')) altAns = `y=${parts[1]}${parts[0]}`;
                
                isCorrect = (userInput === ans) || (altAns && userInput === altAns);

                 if(isCorrect) {
                    feedbackHTML = `<div class="result-item correct border-l-4 p-4"><p class="font-semibold">Correct!</p>
                                    <p class="text-sm">The equation is <strong>${q.answer}</strong>.</p></div>`;
                } else {
                    feedbackHTML = `<div class="result-item incorrect border-l-4 p-4"><p class="font-semibold">Incorrect.</p>
                                    <p class="text-sm">Your answer: <strong>${userInput || 'none'}</strong>. Correct answer: <strong>${q.answer}</strong></p></div>`;
                }
            }

            // Update score and results
            if(isCorrect) {
                score++;
            }
            userResults.push({ title: q.title, isCorrect, feedbackHTML });

            // Show feedback
            feedbackContainer.innerHTML = feedbackHTML;

            // Update navigation
            document.getElementById('submitAnswerBtn').disabled = true; // Disable submit
            let nextButtonText = (currentQuestionIndex === currentQuestions.length - 1) ? "Show Final Results" : "Next Question";
            navigationContainer.innerHTML = `<button id="nextQuestionBtn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700">${nextButtonText}</button>`;
            document.getElementById('nextQuestionBtn').addEventListener('click', loadNextQuestion);
        }

        function loadNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) {
                renderCurrentQuestion();
            } else {
                showFinalResults();
            }
        }
        
        function showFinalResults() {
            quizContainer.classList.add('hidden');
            resultsSection.classList.remove('hidden');

            const total = currentQuestions.length; // Total number of questions
            const percentage = total > 0 ? Math.round((score / total) * 100) : 0;
            let scoreColor = percentage >= 80 ? 'text-green-600' : (percentage >= 60 ? 'text-yellow-600' : 'text-red-600');
            
            scoreElement.innerHTML = `Your Score: <span class="${scoreColor}">${score} out of ${total} (${percentage}%)</span>`;
            
            let resultsHTML = '';
            userResults.forEach((result, index) => {
                resultsHTML += `<div class="result-item border-l-4 p-4 ${result.isCorrect ? 'correct' : 'incorrect'}">
                                 <p class="font-semibold">${currentQuestions[index].id.toUpperCase()}. ${result.title}</p>
                                 <div class="text-sm">${result.isCorrect ? 'You answered this correctly.' : result.feedbackHTML}</div>
                               </div>`;
            });
            detailedResultsElement.innerHTML = resultsHTML;
            window.scrollTo(0, 0);
        }
        
        // --- Graphing Functions ---
        function drawGraph(canvasId, graphData) {
            const { m, b } = graphData;
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const { width, height, scale, originX, originY } = { width: 240, height: 240, scale: 20, originX: 120, originY: 120 };
            canvas.width = width; canvas.height = height;
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#d1d5db'; ctx.lineWidth = 1;
            for (let i = scale; i < width; i += scale) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, height); ctx.stroke(); }
            for (let i = scale; i < height; i += scale) { ctx.beginPath(); ctx.moveTo(0, i); ctx.lineTo(width, i); ctx.stroke(); }
            ctx.strokeStyle = '#374151'; ctx.lineWidth = 1.5;
            ctx.beginPath(); ctx.moveTo(0, originY); ctx.lineTo(width, originY); ctx.moveTo(originX, 0); ctx.lineTo(originX, height); ctx.stroke();
            ctx.strokeStyle = '#3b82f6'; ctx.lineWidth = 2;
            ctx.beginPath();
            const x_min = -6; const y_min = m * x_min + b;
            ctx.moveTo(originX + x_min * scale, originY - y_min * scale);
            const x_max = 6; const y_max = m * x_max + b;
            ctx.lineTo(originX + x_max * scale, originY - y_max * scale);
            ctx.stroke();
            ctx.fillStyle = '#ef4444';
            const p1x = 1, p1y = m*1+b;
            const p2x = 2, p2y = m*2+b;
            if (Math.abs(p1y) < 6 && Math.abs(p2y) < 6) {
                ctx.beginPath(); ctx.arc(originX + p1x*scale, originY - p1y*scale, 4, 0, 2*Math.PI); ctx.fill();
                ctx.beginPath(); ctx.arc(originX + p2x*scale, originY - p2y*scale, 4, 0, 2*Math.PI); ctx.fill();
            }
        }
        
        function drawQuadrantOneGraph(canvasId, graphData) {
            const { m, b } = graphData;
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width; const height = canvas.height;
            const padding = 30; const originX = padding; const originY = height - padding;
            const xMaxVal = 12; const yMaxVal = 120;
            const graphWidth = width - padding - 10; const graphHeight = height - padding - 10;
            const xScale = graphWidth / xMaxVal; const yScale = graphHeight / yMaxVal;
            ctx.clearRect(0, 0, width, height);
            ctx.strokeStyle = '#d1d5db'; ctx.lineWidth = 1;
            for (let i = 1; i <= xMaxVal; i++) {
                ctx.beginPath(); ctx.moveTo(originX + i * xScale, originY); ctx.lineTo(originX + i * xScale, padding - 10); ctx.stroke();
            }
            for (let i = 10; i <= yMaxVal; i += 10) {
                ctx.beginPath(); ctx.moveTo(originX, originY - i * yScale); ctx.lineTo(originX + xMaxVal * xScale, originY - i * yScale); ctx.stroke();
            }
            ctx.strokeStyle = '#374151'; ctx.lineWidth = 1.5;
            ctx.beginPath(); ctx.moveTo(originX - 5, originY); ctx.lineTo(originX + xMaxVal * xScale + 10, originY);
            ctx.moveTo(originX, originY + 5); ctx.lineTo(originX, padding - 15); ctx.stroke();
            ctx.fillStyle = '#6b7280'; ctx.font = '10px Inter'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
            for (let i = 1; i <= xMaxVal; i++) {
                ctx.fillText(i, originX + i * xScale, originY + 15);
            }
            ctx.textAlign = 'right';
            for (let i = 10; i <= yMaxVal; i += 10) {
                ctx.fillText(i, originX - 8, originY - i * yScale);
            }
            ctx.strokeStyle = '#3b82f6'; ctx.lineWidth = 2.5;
            ctx.beginPath();
            const x1 = 0; const y1 = m * x1 + b;
            const x2 = 10; const y2 = m * x2 + b;
            ctx.moveTo(originX + x1 * xScale, originY - y1 * yScale);
            ctx.lineTo(originX + x2 * xScale, originY - y2 * yScale);
            ctx.stroke();
            ctx.fillStyle = '#ef4444';
            const p1x = 0; const p1y = b; const p2x = 2; const p2y = m * 2 + b; const p3x = 5; const p3y = m * 5 + b;
            ctx.beginPath(); ctx.arc(originX + p1x * xScale, originY - p1y * yScale, 5, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(originX + p2x * xScale, originY - p2y * yScale, 5, 0, 2*Math.PI); ctx.fill();
            ctx.beginPath(); ctx.arc(originX + p3x * xScale, originY - p3y * yScale, 5, 0, 2*Math.PI); ctx.fill();
        }
    </script>
</body>
</html>
