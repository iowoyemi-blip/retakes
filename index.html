<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1.3 Radical Operations Quiz - Dynamic</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .quiz-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-left: 4px solid #e74c3c;
            border-radius: 5px;
        }
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .problem {
            margin: 15px 0;
            padding: 12px;
            background: white;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .problem-text {
            font-size: 16px;
            margin-bottom: 10px;
        }
        .answer-input {
            padding: 8px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 5px;
            width: 200px;
        }
        .check-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        .check-btn:hover {
            background: #c0392b;
        }
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .solution {
            background: #e2e3e5;
            color: #383d41;
            border: 1px solid #d6d8db;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        .score {
            text-align: center;
            font-size: 20px;
            margin: 20px 0;
            padding: 15px;
            background: #fdeaea;
            border-radius: 10px;
        }
        .reset-btn {
            background: #27ae60;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
            font-size: 16px;
        }
        .reset-btn:hover {
            background: #219a52;
        }
        .quiz-info {
            text-align: center;
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .math {
            font-family: 'Times New Roman', serif;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>1.3 Radical Operations Quiz</h1>
        <p style="text-align: center; font-style: italic;"><strong>Calculator Allowed</strong></p>
        <div class="quiz-info">
            ðŸ”„ <strong>Dynamic Quiz:</strong> New radical problems generated each time you reset!
        </div>
        
        <div class="score" id="scoreDisplay">Score: 0/8</div>
        
        <div class="section">
            <div class="section-title">1. Perform the indicated operations, if possible, and simplify.</div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-1a"><strong>a)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-1a" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('1a')">Check</button>
                <div class="feedback" id="feedback-1a"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-1b"><strong>b)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-1b" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('1b')">Check</button>
                <div class="feedback" id="feedback-1b"></div>
            </div>
        </div>
        
        <div class="section">
            <div class="section-title">2. Perform the indicated operations and simplify your answer.</div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2a"><strong>a)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2a" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('2a')">Check</button>
                <div class="feedback" id="feedback-2a"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2b"><strong>b)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2b" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('2b')">Check</button>
                <div class="feedback" id="feedback-2b"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2c"><strong>c)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2c" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('2c')">Check</button>
                <div class="feedback" id="feedback-2c"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2d"><strong>d)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2d" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('2d')">Check</button>
                <div class="feedback" id="feedback-2d"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2e"><strong>e)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2e" placeholder="Enter rationalized form">
                <button class="check-btn" onclick="checkAnswer('2e')">Check</button>
                <div class="feedback" id="feedback-2e"></div>
            </div>
            
            <div class="problem">
                <div class="problem-text math" id="problem-2f"><strong>f)</strong> Loading...</div>
                <input type="text" class="answer-input" id="answer-2f" placeholder="Enter simplified form">
                <button class="check-btn" onclick="checkAnswer('2f')">Check</button>
                <div class="feedback" id="feedback-2f"></div>
            </div>
        </div>
        
        <button class="reset-btn" onclick="generateNewQuiz()">ðŸ”„ Generate New Quiz</button>
    </div>
    
    <script>
        let score = 0;
        let attempted = new Set();
        let currentProblems = {};
        
        // Random number generators
        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        function randomChoice(array) {
            return array[Math.floor(Math.random() * array.length)];
        }
        
        // Perfect square factors for radical generation
        const perfectSquares = [4, 9, 16, 25, 36, 49];
        const smallPrimes = [2, 3, 5, 6, 7, 11, 13];
        
        function findLargestSquareFactor(n) {
            let largest = 1;
            for (let i = 2; i * i <= n; i++) {
                while (n % (i * i) === 0) {
                    largest *= i;
                    n /= (i * i);
                }
            }
            return { square: largest, remaining: n };
        }
        
        function gcd(a, b) {
            while (b !== 0) {
                let temp = b;
                b = a % b;
                a = temp;
            }
            return a;
        }
        
        // Problem generators
        function generateAddSubRadicals() {
            // Generate problems like aâˆšb Â± câˆšd where b and d have common factors
            const baseRadical = randomChoice([2, 3, 5, 6, 7]);
            const coeff1 = randomInt(2, 8);
            const coeff2 = randomInt(2, 6);
            const mult1 = randomChoice(perfectSquares);
            const mult2 = randomChoice(perfectSquares);
            const operation = randomChoice(['+', '-']);
            
            const radical1 = baseRadical * mult1;
            const radical2 = baseRadical * mult2;
            
            const expression = `${coeff1}âˆš${radical1} ${operation} ${coeff2}âˆš${radical2}`;
            
            // Simplify
            const simp1 = findLargestSquareFactor(radical1);
            const simp2 = findLargestSquareFactor(radical2);
            
            const newCoeff1 = coeff1 * simp1.square;
            const newCoeff2 = coeff2 * simp2.square;
            
            let finalCoeff;
            if (operation === '+') {
                finalCoeff = newCoeff1 + newCoeff2;
            } else {
                finalCoeff = newCoeff1 - newCoeff2;
            }
            
            const answer = finalCoeff === 0 ? '0' : 
                          finalCoeff === 1 ? `âˆš${baseRadical}` :
                          finalCoeff === -1 ? `-âˆš${baseRadical}` :
                          `${finalCoeff}âˆš${baseRadical}`;
            
            const solution = `${coeff1}âˆš${radical1} ${operation} ${coeff2}âˆš${radical2} = ${newCoeff1}âˆš${baseRadical} ${operation} ${newCoeff2}âˆš${baseRadical} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateMultiplyRadicals() {
            const a = randomChoice(smallPrimes);
            const b = randomChoice(smallPrimes);
            const expression = `âˆš${a} Â· âˆš${b}`;
            const product = a * b;
            const simplified = findLargestSquareFactor(product);
            
            const answer = simplified.square === 1 ? `âˆš${simplified.remaining}` : 
                          simplified.remaining === 1 ? `${simplified.square}` :
                          `${simplified.square}âˆš${simplified.remaining}`;
            
            const solution = `âˆš${a} Â· âˆš${b} = âˆš${product} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateMultiplyCoeffRadicals() {
            const coeff1 = randomInt(2, 4);
            const coeff2 = randomInt(2, 6);
            const rad1 = randomChoice([2, 3, 5, 8, 12, 18]);
            const rad2 = randomChoice([2, 3, 5, 8, 12, 18]);
            
            const expression = `${coeff1}âˆš${rad1} Â· ${coeff2}âˆš${rad2}`;
            
            const newCoeff = coeff1 * coeff2;
            const newRadical = rad1 * rad2;
            const simplified = findLargestSquareFactor(newRadical);
            
            const finalCoeff = newCoeff * simplified.square;
            const answer = simplified.remaining === 1 ? `${finalCoeff}` : `${finalCoeff}âˆš${simplified.remaining}`;
            
            const solution = `${coeff1}âˆš${rad1} Â· ${coeff2}âˆš${rad2} = ${newCoeff}âˆš${newRadical} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateDivideRadicals() {
            const numerator = randomChoice([18, 24, 32, 45, 50, 72, 98]);
            const denominator = randomChoice([2, 3, 4, 6, 8]);
            
            const expression = `âˆš${numerator}/âˆš${denominator}`;
            const quotient = numerator / denominator;
            const simplified = findLargestSquareFactor(quotient);
            
            const answer = simplified.square === 1 ? `âˆš${simplified.remaining}` : 
                          simplified.remaining === 1 ? `${simplified.square}` :
                          `${simplified.square}âˆš${simplified.remaining}`;
            
            const solution = `âˆš${numerator}/âˆš${denominator} = âˆš${quotient} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateRationalizeRadicals() {
            const numerator = randomChoice(smallPrimes);
            const denominator = randomChoice(smallPrimes.filter(x => x !== numerator));
            
            const expression = `âˆš${numerator}/âˆš${denominator}`;
            
            // Rationalize by multiplying by âˆšdenominator/âˆšdenominator
            const rationalizedNum = numerator * denominator;
            const simplified = findLargestSquareFactor(rationalizedNum);
            
            let answer;
            if (simplified.square === 1) {
                answer = `âˆš${simplified.remaining}/${denominator}`;
            } else if (simplified.remaining === 1) {
                answer = `${simplified.square}/${denominator}`;
            } else {
                answer = `${simplified.square}âˆš${simplified.remaining}/${denominator}`;
            }
            
            // Check if we can simplify the fraction
            if (simplified.square > 1) {
                const commonFactor = gcd(simplified.square, denominator);
                if (commonFactor > 1) {
                    const newNum = simplified.square / commonFactor;
                    const newDen = denominator / commonFactor;
                    if (simplified.remaining === 1) {
                        answer = newDen === 1 ? `${newNum}` : `${newNum}/${newDen}`;
                    } else {
                        answer = newDen === 1 ? `${newNum}âˆš${simplified.remaining}` : `${newNum}âˆš${simplified.remaining}/${newDen}`;
                    }
                }
            }
            
            const solution = `âˆš${numerator}/âˆš${denominator} = (âˆš${numerator} Â· âˆš${denominator})/(âˆš${denominator} Â· âˆš${denominator}) = âˆš${rationalizedNum}/${denominator} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateSimplifyFraction() {
            const nums = [6, 10, 12, 15, 20, 21, 24];
            const dens = [18, 24, 27, 36, 48, 54, 72];
            
            const numerator = randomChoice(nums);
            const denominator = randomChoice(dens);
            
            const expression = `âˆš${numerator}/âˆš${denominator}`;
            
            // Simplify âˆš(numerator/denominator)
            const commonFactor = gcd(numerator, denominator);
            const simpNum = numerator / commonFactor;
            const simpDen = denominator / commonFactor;
            
            const numFactors = findLargestSquareFactor(simpNum);
            const denFactors = findLargestSquareFactor(simpDen);
            
            let answer;
            if (numFactors.square === 1 && denFactors.square === 1) {
                answer = `âˆš${simpNum}/âˆš${simpDen}`;
            } else if (denFactors.square === 1) {
                answer = numFactors.remaining === 1 ? `${numFactors.square}/âˆš${simpDen}` : `${numFactors.square}âˆš${numFactors.remaining}/âˆš${simpDen}`;
            } else if (numFactors.square === 1) {
                answer = numFactors.remaining === 1 ? `1/${denFactors.square}` : `âˆš${numFactors.remaining}/${denFactors.square}`;
            } else {
                const finalNum = numFactors.square;
                const finalDen = denFactors.square;
                const finalGcd = gcd(finalNum, finalDen);
                const reducedNum = finalNum / finalGcd;
                const reducedDen = finalDen / finalGcd;
                
                if (numFactors.remaining === 1) {
                    answer = reducedDen === 1 ? `${reducedNum}` : `${reducedNum}/${reducedDen}`;
                } else {
                    answer = reducedDen === 1 ? `${reducedNum}âˆš${numFactors.remaining}` : `${reducedNum}âˆš${numFactors.remaining}/${reducedDen}`;
                }
            }
            
            const solution = `âˆš${numerator}/âˆš${denominator} = âˆš${simpNum}/âˆš${simpDen} = ${answer}`;
            
            return { expression, answer, solution };
        }
        
        function generateNewQuiz() {
            // Generate new problems
            currentProblems = {
                '1a': generateAddSubRadicals(),
                '1b': generateAddSubRadicals(),
                '2a': generateMultiplyRadicals(),
                '2b': generateMultiplyCoeffRadicals(),
                '2c': generateDivideRadicals(),
                '2d': generateDivideRadicals(),
                '2e': generateRationalizeRadicals(),
                '2f': generateSimplifyFraction()
            };
            
            // Update problem displays
            Object.keys(currentProblems).forEach(key => {
                document.getElementById(`problem-${key}`).innerHTML = `<strong>${key.charAt(0) === '1' ? key : key})</strong> ${currentProblems[key].expression}`;
            });
            
            // Reset quiz state
            score = 0;
            attempted.clear();
            
            // Clear all inputs and feedback
            const inputs = document.querySelectorAll('.answer-input');
            inputs.forEach(input => input.value = '');
            
            const feedbacks = document.querySelectorAll('.feedback');
            feedbacks.forEach(feedback => feedback.innerHTML = '');
            
            updateScore();
        }
        
        function normalizeAnswer(answer) {
            return answer.replace(/\s+/g, '').toLowerCase();
        }
        
        function checkAnswer(problem) {
            const userInput = document.getElementById(`answer-${problem}`).value.trim();
            const feedbackDiv = document.getElementById(`feedback-${problem}`);
            const currentProblem = currentProblems[problem];
            
            if (userInput === '') {
                feedbackDiv.innerHTML = '<div class="incorrect">Please enter an answer.</div>';
                return;
            }
            
            if (!attempted.has(problem)) {
                attempted.add(problem);
                
                const normalizedUser = normalizeAnswer(userInput);
                const normalizedCorrect = normalizeAnswer(currentProblem.answer);
                
                // Also check some common equivalent forms
                const equivalentForms = [currentProblem.answer];
                
                // Add equivalent forms for radicals
                if (currentProblem.answer.includes('âˆš')) {
                    equivalentForms.push(currentProblem.answer.replace('âˆš', 'sqrt'));
                    equivalentForms.push(currentProblem.answer.replace('âˆš', '^(1/2)'));
                }
                
                const isCorrect = equivalentForms.some(form => normalizeAnswer(form) === normalizedUser);
                
                if (isCorrect) {
                    score++;
                    feedbackDiv.innerHTML = `<div class="correct">âœ“ Correct! The answer is ${currentProblem.answer}.</div><div class="solution">Solution: ${currentProblem.solution}</div>`;
                } else {
                    feedbackDiv.innerHTML = `<div class="incorrect">âœ— Incorrect. Your answer: ${userInput}, Correct answer: ${currentProblem.answer}</div><div class="solution">Solution: ${currentProblem.solution}</div>`;
                }
                updateScore();
            }
        }
        
        function updateScore() {
            document.getElementById('scoreDisplay').textContent = `Score: ${score}/8`;
            
            if (score === 8) {
                document.getElementById('scoreDisplay').innerHTML += '<br>ðŸŽ‰ Perfect Score! Excellent work with radicals!';
            }
        }
        
        // Allow Enter key to check answers
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.classList.contains('answer-input')) {
                const problemId = e.target.id.split('-')[1];
                checkAnswer(problemId);
            }
        });
        
        // Generate initial quiz on page load
        window.onload = function() {
            generateNewQuiz();
        };
    </script>
</body>
</html>